<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>í—¤ë¦¬ë¦¬í¬ ê°€ì´ë˜ìŠ¤ Q&A ë°ì´í„° ê´€ë¦¬</title>
  <!-- Pretendard Variable: ë¡œì»¬/ë‹¤ë¥¸ CDNì— Variable ìˆìœ¼ë©´ ì ìš©ë¨. ì—†ìœ¼ë©´ ì•„ë˜ Pretendard(static) ì‚¬ìš© -->
    <link rel="stylesheet" as="style" crossorigin href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.9/dist/web/static/pretendard-dynamic-subset.css" />
  <style>
    * { box-sizing: border-box; }
    body {
      margin: 0;
      font-family: 'Pretendard Variable', 'Pretendard', -apple-system, BlinkMacSystemFont, 'Malgun Gothic', sans-serif;
      background: #fff;
      color: #111;
      -webkit-font-smoothing: antialiased;
    }
    a { color: inherit; text-decoration: none; }
    input, button, select, textarea { font-family: inherit; }

    /* ê³µí†µ: í…Œë‘ë¦¬/ëª¨ì„œë¦¬ í†µì¼ */
    :root {
      --border: 1px solid #e0e0e0;
      --radius: 6px;
      --radius-sm: 4px;
      --text: #111;
      --text-secondary: #555;
      --bg-subtle: #f5f5f5;
    }

    /* Header */
    .header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 14px 24px;
      border-bottom: var(--border);
    }
    .logo { font-weight: 700; font-size: 1.125rem; letter-spacing: -0.02em; }
    .logo-sub { font-size: 0.6875rem; color: var(--text-secondary); font-weight: 400; letter-spacing: 0; }
    .nav { display: flex; align-items: center; gap: 24px; }
    .nav a { font-size: 0.875rem; color: var(--text); }
    .nav a.active { font-weight: 600; }
    .header-right { display: flex; align-items: center; gap: 16px; font-size: 0.875rem; }
    .theme-btn { background: none; border: none; cursor: pointer; padding: 4px; font-size: 1.1rem; }

    /* Main */
    .main { max-width: 1200px; margin: 0 auto; padding: 32px 24px; }
    .page-title { font-size: 1.5rem; font-weight: 700; text-align: center; margin-bottom: 24px; letter-spacing: -0.02em; }

    /* Tabs */
    .tabs { display: flex; gap: 0; margin-bottom: 24px; border-bottom: var(--border); }
    .tab {
      padding: 10px 20px; cursor: pointer; font-size: 0.875rem; font-weight: 500; background: #fff;
      border: var(--border); border-bottom: none; margin-bottom: -1px; border-radius: var(--radius) var(--radius) 0 0;
    }
    .tab.active { background: #111; color: #fff; border-color: #111; }
    .tab:not(.active):hover { background: var(--bg-subtle); }

    /* Search + Test (ê²€ìƒ‰ 1ì¤„, Q&A í…ŒìŠ¤íŠ¸ 1ì¤„ - ì„¸ë¡œ ë°°ì¹˜) */
    .search-section {
      display: flex;
      flex-direction: column;
      gap: 14px;
      margin-bottom: 20px;
      padding: 18px 20px;
      background: var(--bg-subtle);
      border-radius: var(--radius);
      border: var(--border);
    }
    .search-row { display: flex; align-items: center; gap: 10px; width: 100%; }
    .search-row label { white-space: nowrap; font-size: 0.8125rem; font-weight: 500; color: var(--text-secondary); }
    select {
      padding: 9px 12px; border: var(--border); border-radius: var(--radius-sm); font-size: 0.8125rem;
      min-width: 100px; background: #fff;
    }
    .search-input-wrap { display: flex; flex: 1; min-width: 0; }
    .search-input-wrap input {
      flex: 1; padding: 9px 12px; border: var(--border); border-radius: var(--radius-sm);
      font-size: 0.8125rem;
    }
    .search-input-wrap input::placeholder { color: #999; }
    .btn-search {
      padding: 9px 14px; border: var(--border); background: #fff; border-radius: var(--radius-sm);
      cursor: pointer; font-size: 0.875rem;
    }
    .test-row { display: flex; align-items: center; gap: 10px; width: 100%; }
    .test-row .search-input-wrap { flex: 1; min-width: 0; }
    .test-row .search-input-wrap input { min-width: 0; }
    .test-label { white-space: nowrap; font-size: 0.8125rem; font-weight: 500; color: var(--text-secondary); }

    /* Actions + Table header */
    .list-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 12px; }
    .list-actions { display: flex; gap: 8px; }
    .btn {
      padding: 8px 16px; border-radius: var(--radius-sm); font-size: 0.8125rem; font-weight: 500;
      cursor: pointer; border: var(--border); background: #fff;
    }
    .btn-primary { background: #111; color: #fff; border-color: #111; }
    .btn-primary:hover { background: #333; border-color: #333; }
    .btn:disabled { opacity: 0.5; cursor: not-allowed; }
    .btn-delete:not(:disabled):hover { background: #fef2f2; border-color: #dc2626; color: #dc2626; }

    /* Table */
    .table-wrap { overflow-x: auto; border: var(--border); border-radius: var(--radius); margin-bottom: 16px; }
    table { width: 100%; border-collapse: collapse; font-size: 0.8125rem; }
    th, td { padding: 12px 16px; text-align: left; border-bottom: var(--border); }
    th { background: #111; color: #fff; font-weight: 600; font-size: 0.8125rem; }
    th:first-child, td:first-child { width: 40px; text-align: center; }
    td.answer { max-width: 360px; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; color: var(--text-secondary); }
    tr:hover { background: var(--bg-subtle); }
    tr:last-child td { border-bottom: none; }
    .clickable { cursor: pointer; color: #2563eb; }
    .clickable:hover { text-decoration: underline; }

    /* ë¦¬ìŠ¤íŠ¸ ìƒë‹¨: í…Œì´ë¸” ìœ„ì— "Q&A ë°ì´í„° ëª©ë¡" + ì„ íƒ ê°œìˆ˜ + 25ê°œì”© ë³´ê¸° + ìƒˆë¡œê³ ì¹¨ */
    .list-top {
      display: flex;
      justify-content: space-between;
      align-items: center;
      flex-wrap: wrap;
      gap: 12px;
      margin-bottom: 12px;
    }
    .list-top .list-title { font-size: 0.9375rem; font-weight: 600; }
    .list-top .list-controls-wrap { display: flex; align-items: center; gap: 12px; flex-wrap: wrap; }
    .selected-count { font-size: 0.8125rem; color: #dc2626; font-weight: 500; }
    .list-controls { display: flex; align-items: center; gap: 10px; }
    .list-controls select { padding: 6px 10px; font-size: 0.8125rem; border: var(--border); border-radius: var(--radius-sm); background: #fff; }
    .btn-refresh { width: 32px; height: 32px; border: var(--border); background: #fff; border-radius: var(--radius-sm); cursor: pointer; font-size: 0.875rem; }
    .btn-refresh:hover { background: var(--bg-subtle); }

    /* Pagination */
    .pagination { display: flex; align-items: center; justify-content: center; gap: 4px; margin-top: 20px; }
    .pagination button {
      min-width: 32px; height: 32px; border: var(--border); background: #fff; border-radius: var(--radius-sm);
      cursor: pointer; font-size: 0.8125rem;
    }
    .pagination button:hover:not(:disabled) { background: var(--bg-subtle); }
    .pagination button.active { background: #111; color: #fff; border-color: #111; }
    .pagination button:disabled { opacity: 0.5; cursor: default; }

    /* Modal */
    .modal-overlay {
      position: fixed; inset: 0; background: rgba(0,0,0,0.52); display: none; align-items: center; justify-content: center;
      z-index: 1000; padding: 24px; backdrop-filter: blur(2px);
    }
    .modal-overlay.open { display: flex; }
    .modal {
      background: #fff; border-radius: var(--radius); box-shadow: 0 8px 32px rgba(0,0,0,0.12);
      width: 100%; max-width: 560px; max-height: 90vh; overflow-y: auto; border: var(--border);
    }
    .modal-header { display: flex; justify-content: space-between; align-items: center; padding: 20px 24px; border-bottom: var(--border); }
    .modal-title { font-size: 1.125rem; font-weight: 700; }
    .btn-close { background: none; border: none; font-size: 1.25rem; cursor: pointer; padding: 4px; line-height: 1; color: var(--text-secondary); }
    .btn-close:hover { color: var(--text); }
    .modal-body { padding: 24px; }
    .field { margin-bottom: 20px; }
    .field label { display: block; font-size: 0.8125rem; font-weight: 500; margin-bottom: 8px; color: var(--text); }
    .field input[type="text"], .field textarea {
      width: 100%; padding: 10px 12px; border: var(--border); border-radius: var(--radius-sm);
      font-size: 0.8125rem; font-family: inherit;
    }
    .field textarea { min-height: 120px; resize: vertical; }
    .field .hint { font-size: 0.75rem; color: #888; margin-top: 6px; }
    .field .char-count { font-size: 0.75rem; color: #888; margin-top: 4px; text-align: right; }
    .field .char-count.over { color: #dc2626; }
    .modal-footer { display: flex; justify-content: flex-end; gap: 8px; padding: 16px 24px; border-top: var(--border); }
    .modal-footer .btn { min-width: 80px; }

    /* Tags */
    .tags-wrap {
      border: var(--border); border-radius: var(--radius-sm); padding: 8px 12px; min-height: 42px;
      display: flex; flex-wrap: wrap; gap: 6px; align-items: center; background: #fff;
    }
    .tags-wrap:focus-within { outline: 2px solid #111; outline-offset: -1px; }
    .tag {
      display: inline-flex; align-items: center; gap: 4px; padding: 4px 8px; background: var(--bg-subtle);
      border-radius: var(--radius-sm); font-size: 0.8125rem;
    }
    .tag-remove { background: none; border: none; cursor: pointer; padding: 0 2px; font-size: 1rem; line-height: 1; color: var(--text-secondary); }
    .tag-remove:hover { color: #dc2626; }
    .tags-container { display: contents; }
    .tags-input { border: none; outline: none; flex: 1; min-width: 120px; font-size: 0.9rem; padding: 4px; }

    /* Confirm modal */
    .confirm-modal .modal { max-width: 400px; }
    .confirm-modal .modal-body { padding: 24px; }
    .confirm-modal .modal-footer { justify-content: center; gap: 12px; }
    .confirm-modal .btn-cancel { background: #fff; border: 1px solid #ddd; }
    .confirm-modal .btn-ok { background: #111; color: #fff; border: none; }

    /* Toast */
    .toast {
      position: fixed; bottom: 24px; left: 50%; transform: translateX(-50%) translateY(100px);
      background: #111; color: #fff; padding: 12px 24px; border-radius: var(--radius); font-size: 0.8125rem;
      box-shadow: 0 4px 12px rgba(0,0,0,0.2); z-index: 2000; opacity: 0; transition: transform 0.3s, opacity 0.3s;
    }
    .toast.show { transform: translateX(-50%) translateY(0); opacity: 1; }

    /* íƒ­ ì½˜í…ì¸  ì „í™˜ */
    .tab-content { display: none; }
    .tab-content.active { display: block; }

    /* ë‹µë³€ í’ˆì§ˆ ê´€ë¦¬ ì „ìš© ìŠ¤íƒ€ì¼ */
    .quality-filters { display: flex; align-items: center; gap: 10px; flex-wrap: wrap; }
    .quality-filters select { padding: 6px 10px; font-size: 0.8125rem; border: var(--border); border-radius: var(--radius-sm); background: #fff; }
    .status-badge {
      display: inline-block; padding: 2px 8px; border-radius: var(--radius-sm); font-size: 0.75rem; font-weight: 500;
    }
    .status-badge.error { background: #fee; color: #dc2626; }
    .status-badge.pending { background: #fef3c7; color: #d97706; }
    .status-badge.answered { background: #dbeafe; color: #2563eb; }
    .status-badge.processed { background: #d1fae5; color: #059669; }
    .status-badge.reflected { background: #e0e7ff; color: #6366f1; }
  </style>
</head>
<body>
  <header class="header">
    <div class="logo">
      LOSTARK<br>
      <span class="logo-sub">Lostark Mobile AI Studio</span>
    </div>
    <nav class="nav">
      <a href="#">Documents</a>
      <a href="#" class="active">Heririk Guidance</a>
    </nav>
    <div class="header-right">
      <a href="#">Login</a>
      <button type="button" class="theme-btn" aria-label="í…Œë§ˆ">â˜€ï¸</button>
    </div>
  </header>

  <main class="main">
    <h1 class="page-title">í—¤ë¦¬ë¦¬í¬ ê°€ì´ë˜ìŠ¤ Q&A ë°ì´í„° ê´€ë¦¬</h1>

    <div class="tabs">
      <button type="button" class="tab active" data-tab="qa">Q&A ë°ì´í„° ê´€ë¦¬</button>
      <button type="button" class="tab" data-tab="quality">ë‹µë³€ í’ˆì§ˆ ê´€ë¦¬</button>
    </div>

    <!-- Q&A ë°ì´í„° ê´€ë¦¬ íƒ­ ì½˜í…ì¸  -->
    <div class="tab-content active" id="tabContentQa">
    <section class="search-section">
      <div class="search-row">
        <label>ê²€ìƒ‰ í•­ëª©</label>
        <select id="searchType">
          <option value="all">ì „ì²´</option>
          <option value="question">ëŒ€í‘œ ì§ˆë¬¸</option>
          <option value="answer">ë‹µë³€</option>
          <option value="keyword">í‚¤ì›Œë“œ</option>
        </select>
        <div class="search-input-wrap">
          <input type="text" id="searchKeyword" placeholder="ê²€ìƒ‰ì–´ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”">
          <button type="button" class="btn-search" id="btnSearch" aria-label="ê²€ìƒ‰">ğŸ”</button>
        </div>
      </div>
      <div class="test-row">
        <span class="test-label">Q&A í…ŒìŠ¤íŠ¸</span>
        <select id="testTop">
          <option value="5">Top5</option>
          <option value="10">Top10</option>
        </select>
        <div class="search-input-wrap">
          <input type="text" id="testQuestion" placeholder="í…ŒìŠ¤íŠ¸í•  ì§ˆë¬¸ì„ ì…ë ¥í•´ì£¼ì„¸ìš” (ì˜ˆ: ë¯¸ë‹ˆë§µ ì–´ë–»ê²Œ ì—´ì–´?)">
          <button type="button" class="btn-search" id="btnTest" aria-label="í…ŒìŠ¤íŠ¸ ì‹¤í–‰">ğŸ”</button>
        </div>
      </div>
    </section>

    <div class="list-header">
      <span></span>
      <div class="list-actions">
        <button type="button" class="btn btn-primary" id="btnNew">+ ì‹ ê·œ ë“±ë¡</button>
        <button type="button" class="btn btn-delete" id="btnDelete" disabled>ì‚­ì œ</button>
      </div>
    </div>

    <div class="list-top">
      <h2 class="list-title">Q&A ë°ì´í„° ëª©ë¡</h2>
      <div class="list-controls-wrap">
        <span class="selected-count" id="selectedCount">ì„ íƒëœ ì§ˆë¬¸ ê°œìˆ˜ 0</span>
        <div class="list-controls">
          <select id="pageSize">
            <option value="10">10ê°œì”© ë³´ê¸°</option>
            <option value="25" selected>25ê°œì”© ë³´ê¸°</option>
            <option value="50">50ê°œì”© ë³´ê¸°</option>
            <option value="100">100ê°œì”© ë³´ê¸°</option>
          </select>
          <button type="button" class="btn-refresh" id="btnRefresh" aria-label="ìƒˆë¡œ ê³ ì¹¨">ğŸ”„</button>
        </div>
      </div>
    </div>

    <div class="table-wrap">
      <table>
        <thead>
          <tr>
            <th><input type="checkbox" id="checkAll" aria-label="ì „ì²´ ì„ íƒ"></th>
            <th>ëŒ€í‘œ ì§ˆë¬¸</th>
            <th>ë‹µë³€</th>
            <th>í‚¤ì›Œë“œ</th>
            <th>ìˆ˜ì •ì¼</th>
          </tr>
        </thead>
        <tbody id="tableBody">
          <tr data-id="1">
            <td><input type="checkbox" class="row-check"></td>
            <td class="clickable edit-row">ì†Œë“œë§ˆìŠ¤í„°</td>
            <td class="answer clickable edit-answer" title="í´ë¦­í•˜ì—¬ ë‹µë³€ ìˆ˜ì •">ì†Œë“œë§ˆìŠ¤í„°ëŠ” ê²€ìˆ ê³¼ í™˜ì˜ìˆ ì„ ì¡°í™”ë¡­ê²Œ ì‚¬ìš©í•˜ëŠ” ê·¼ì ‘ ë”œëŸ¬ì˜ˆìš”. ì„¬ê´‘ê³¼ ì—¼í™” ë‘ ê°€ì§€ ì§ì—… ê°ì¸ìœ¼ë¡œ í”Œë ˆì´ ìŠ¤íƒ€ì¼ì„ ì„ íƒí•  ìˆ˜...</td>
            <td>ì†Œë“œë§ˆìŠ¤í„°</td>
            <td>26.01.01</td>
          </tr>
          <tr data-id="2">
            <td><input type="checkbox" class="row-check"></td>
            <td class="clickable edit-row">ì„¸íŠ¸ ì½”ì–´ëŠ” ì–´ë””ì„œ ì–»ì–´?</td>
            <td class="answer clickable edit-answer" title="í´ë¦­í•˜ì—¬ ë‹µë³€ ìˆ˜ì •">ì„¸íŠ¸ ì½”ì–´ëŠ” ë ˆì´ë“œ ë° ì¼ì¼ í€˜ìŠ¤íŠ¸ ë³´ìƒìœ¼ë¡œ íšë“í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤...</td>
            <td>ì„¸íŠ¸ì½”ì–´</td>
            <td>26.01.01</td>
          </tr>
          <tr data-id="3">
            <td><input type="checkbox" class="row-check"></td>
            <td class="clickable edit-row">ì¥ë¹„ì„¸íŠ¸ëŠ” ì–´ë””ì„œ ì–»ì–´?</td>
            <td class="answer clickable edit-answer" title="í´ë¦­í•˜ì—¬ ë‹µë³€ ìˆ˜ì •">ì¥ë¹„ì„¸íŠ¸ëŠ” ë˜ì „ ë° ë³´ìŠ¤ ë“œëìœ¼ë¡œ íšë“ ê°€ëŠ¥í•©ë‹ˆë‹¤...</td>
            <td>ì¥ë¹„ì„¸íŠ¸</td>
            <td>26.01.01</td>
          </tr>
          <tr data-id="4">
            <td><input type="checkbox" class="row-check"></td>
            <td class="clickable edit-row">ë¯¸ë‹ˆë§µ ì–´ë–»ê²Œ ì—´ì–´?</td>
            <td class="answer clickable edit-answer" title="í´ë¦­í•˜ì—¬ ë‹µë³€ ìˆ˜ì •">ë¯¸ë‹ˆë§µ ìœ„ì¹˜ëŠ” ìš°ì¸¡ ìƒë‹¨ì— ìœ„ì¹˜í•´ ìˆìŠµë‹ˆë‹¤.</td>
            <td>ë¯¸ë‹ˆë§µ</td>
            <td>26.01.01</td>
          </tr>
        </tbody>
      </table>
    </div>

    <div class="pagination" id="pagination">
      <button type="button" data-page="first">Â«</button>
      <button type="button" data-page="prev">â€¹</button>
      <button type="button" class="active" data-page="1">1</button>
      <button type="button" data-page="2">2</button>
      <button type="button" data-page="3">3</button>
      <span>...</span>
      <button type="button" data-page="10">10</button>
      <button type="button" data-page="next">â€º</button>
      <button type="button" data-page="last">Â»</button>
    </div>
    </div>

    <!-- ë‹µë³€ í’ˆì§ˆ ê´€ë¦¬ íƒ­ ì½˜í…ì¸  -->
    <div class="tab-content" id="tabContentQuality">
      <section class="search-section">
        <div class="search-row">
          <label>ê²€ìƒ‰ í•­ëª©</label>
          <select id="qualitySearchType">
            <option value="all">ì „ì²´</option>
            <option value="question">ëŒ€í‘œ ì§ˆë¬¸</option>
            <option value="answer">ë‹µë³€</option>
          </select>
          <div class="search-input-wrap">
            <input type="text" id="qualitySearchKeyword" placeholder="ê²€ìƒ‰ì–´ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”">
            <button type="button" class="btn-search" id="btnQualitySearch" aria-label="ê²€ìƒ‰">ğŸ”</button>
          </div>
        </div>
      </section>

      <div class="list-header">
        <span></span>
        <div class="list-actions">
          <button type="button" class="btn btn-primary" id="btnReflect" disabled>Q&A ë°˜ì˜</button>
          <button type="button" class="btn btn-delete" id="btnQualityDelete" disabled>ì‚­ì œ</button>
        </div>
      </div>

      <div class="list-top">
        <h2 class="list-title">ë‹µë³€ í’ˆì§ˆ ê´€ë¦¬ ëª©ë¡</h2>
        <div class="list-controls-wrap">
          <span class="selected-count" id="qualitySelectedCount">ì„ íƒëœ ì§ˆë¬¸ ê°œìˆ˜ 0</span>
          <div class="quality-filters">
            <select id="qualityPageSize">
              <option value="25" selected>25ê°œì”© ë³´ê¸°</option>
              <option value="50">50ê°œì”© ë³´ê¸°</option>
              <option value="100">100ê°œì”© ë³´ê¸°</option>
              <option value="150">150ê°œì”© ë³´ê¸°</option>
              <option value="200">200ê°œì”© ë³´ê¸°</option>
            </select>
            <select id="qualitySortBy">
              <option value="newest" selected>ìµœì‹ ìˆœ</option>
              <option value="most-questions">ìœ ì € ì§ˆë¬¸ ë§ì€ ìˆœ</option>
              <option value="week1">ìµœê·¼ 1ì£¼ì¼</option>
              <option value="week2">ìµœê·¼ 2ì£¼ì¼</option>
              <option value="month1">ìµœê·¼ 1ê°œì›”</option>
            </select>
            <select id="qualityStatusFilter">
              <option value="all">ì „ì²´</option>
              <option value="error">ì˜¤ì‘ë‹µ</option>
              <option value="pending" selected>ë¯¸ì²˜ë¦¬</option>
              <option value="answered">ë‹µë³€ ì™„ë£Œ</option>
              <option value="processed">ì²˜ë¦¬ ì™„ë£Œ</option>
            </select>
            <button type="button" class="btn-refresh" id="btnQualityRefresh" aria-label="ìƒˆë¡œ ê³ ì¹¨">ğŸ”„</button>
          </div>
        </div>
      </div>

      <div class="table-wrap">
        <table>
          <thead>
            <tr>
              <th><input type="checkbox" id="qualityCheckAll" aria-label="ì „ì²´ ì„ íƒ"></th>
              <th>ëŒ€í‘œ ì§ˆë¬¸</th>
              <th>ë‹µë³€</th>
              <th>ì‘ë‹µ ìƒíƒœ</th>
              <th>ì²˜ë¦¬ ìƒíƒœ</th>
            </tr>
          </thead>
          <tbody id="qualityTableBody">
            <tr data-id="q1">
              <td><input type="checkbox" class="quality-row-check"></td>
              <td class="clickable view-detail">ì†Œë“œë§ˆìŠ¤í„°</td>
              <td class="answer clickable edit-answer" title="í´ë¦­í•˜ì—¬ ë‹µë³€ ìˆ˜ì •">-</td>
              <td><span class="status-badge pending">ë¯¸ì²˜ë¦¬</span></td>
              <td>-</td>
            </tr>
            <tr data-id="q2">
              <td><input type="checkbox" class="quality-row-check"></td>
              <td class="clickable view-detail">ì„¸íŠ¸ ì½”ì–´ëŠ” ì–´ë””ì„œ ì–»ì–´?</td>
              <td class="answer clickable edit-answer" title="í´ë¦­í•˜ì—¬ ë‹µë³€ ìˆ˜ì •">-</td>
              <td><span class="status-badge pending">ë¯¸ì²˜ë¦¬</span></td>
              <td>-</td>
            </tr>
            <tr data-id="q3">
              <td><input type="checkbox" class="quality-row-check"></td>
              <td class="clickable view-detail">ì¥ë¹„ì„¸íŠ¸ëŠ” ì–´ë””ì„œ ì–»ì–´?</td>
              <td class="answer clickable edit-answer" title="í´ë¦­í•˜ì—¬ ë‹µë³€ ìˆ˜ì •">-</td>
              <td><span class="status-badge error">ì˜¤ì‘ë‹µ</span></td>
              <td>-</td>
            </tr>
            <tr data-id="q4">
              <td><input type="checkbox" class="quality-row-check"></td>
              <td class="clickable view-detail">ê°ì¸ì„œëŠ” ì–´ë–»ê²Œ ì‚¬ìš©í•´ì•¼í•´?</td>
              <td class="answer clickable edit-answer" title="í´ë¦­í•˜ì—¬ ë‹µë³€ ìˆ˜ì •">-</td>
              <td><span class="status-badge error">ì˜¤ì‘ë‹µ</span></td>
              <td>-</td>
            </tr>
            <tr data-id="q5">
              <td><input type="checkbox" class="quality-row-check"></td>
              <td class="clickable view-detail">ì¹´ì˜¤ìŠ¤ ë¸Œë ˆì´í¬ì—ì„œ ì–´ë–»ê²Œ ì–»ì–´?</td>
              <td class="answer clickable edit-answer" title="í´ë¦­í•˜ì—¬ ë‹µë³€ ìˆ˜ì •">ì¹´ì˜¤ìŠ¤ ë¸Œë ˆì´í¬ì—ì„œ ì„¸íŠ¸ ì½”ì–´ëŠ” ìŠ¤í…Œì´ì§€ë¥¼ í´ë¦¬ì–´í•˜ê±°ë‚˜ ì„¸íŠ¸ íš¨ê³¼ ì½”ì–´ ì•„ì´í…œì„ ë¶„í•´í•´ì„œ ì–»ì„ ìˆ˜ ìˆì–´ìš”.</td>
              <td>-</td>
              <td><span class="status-badge answered">ë‹µë³€ ì™„ë£Œ</span></td>
            </tr>
            <tr data-id="q6">
              <td><input type="checkbox" class="quality-row-check"></td>
              <td class="clickable view-detail">ë¯¸ë‹ˆë§µ ì–´ë–»ê²Œ ì—´ì–´?</td>
              <td class="answer clickable edit-answer" title="í´ë¦­í•˜ì—¬ ë‹µë³€ ìˆ˜ì •">ë¯¸ë‹ˆë§µ ìœ„ì¹˜ëŠ” ìš°ì¸¡ ìƒë‹¨ì— ìœ„ì¹˜í•´ ìˆìŠµë‹ˆë‹¤.</td>
              <td>-</td>
              <td><span class="status-badge processed">ì²˜ë¦¬ ì™„ë£Œ</span></td>
            </tr>
          </tbody>
        </table>
      </div>

      <div class="pagination" id="qualityPagination">
        <button type="button" data-page="first">Â«</button>
        <button type="button" data-page="prev">â€¹</button>
        <button type="button" class="active" data-page="1">1</button>
        <button type="button" data-page="2">2</button>
        <button type="button" data-page="3">3</button>
        <span>...</span>
        <button type="button" data-page="10">10</button>
        <button type="button" data-page="next">â€º</button>
        <button type="button" data-page="last">Â»</button>
      </div>
    </div>
  </main>

  <!--
    [ëª¨ë‹¬ ëª©ë¡] ì´ 5ê°œ
    1. modalNew - ì‹ ê·œ Q&A ë“±ë¡ â†’ ì™„ë£Œ ì‹œ í† ìŠ¤íŠ¸: "ì‹ ê·œ ë“±ë¡ ì™„ë£Œ ë˜ì—ˆìŠµë‹ˆë‹¤."
    2. modalEdit - ë‹µë³€ ìˆ˜ì • â†’ ì™„ë£Œ ì‹œ í† ìŠ¤íŠ¸: "ë‹µë³€ ìˆ˜ì • ì™„ë£Œ ë˜ì—ˆìŠµë‹ˆë‹¤."
    3. modalConfirm - ì‘ì„± ì¤‘ ë‹«ê¸° í™•ì¸: "ì‘ì„± ì¤‘ì¸ ë‚´ìš©ì´ ì €ì¥ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ë‹«ìœ¼ì‹œê² ìŠµë‹ˆê¹Œ?"
    4. modalDeleteConfirm - ì‚­ì œ í™•ì¸: "ì‚­ì œ í•˜ì‹œê² ìŠµë‹ˆê¹Œ?" â†’ í™•ì¸ ì‹œ í† ìŠ¤íŠ¸: "ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤."
    5. modalDetail - ëŒ€í‘œ ì§ˆë¬¸ ìì„¸íˆ ë³´ê¸°
    [í† ìŠ¤íŠ¸] ì‹ ê·œ ë“±ë¡ ì™„ë£Œ / ë‹µë³€ ìˆ˜ì • ì™„ë£Œ / Q&A ë°˜ì˜ ì™„ë£Œ / ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.
  -->
  <!-- ì‹ ê·œ Q&A ë“±ë¡ ëª¨ë‹¬ -->
  <div class="modal-overlay" id="modalNew" role="dialog" aria-labelledby="modalNewTitle">
    <div class="modal">
      <div class="modal-header">
        <h2 class="modal-title" id="modalNewTitle">ì‹ ê·œ Q&A ë“±ë¡</h2>
        <button type="button" class="btn-close" id="closeNew" aria-label="ë‹«ê¸°">&times;</button>
      </div>
      <div class="modal-body">
        <div class="field">
          <label for="newQuestion">ëŒ€í‘œì§ˆë¬¸</label>
          <input type="text" id="newQuestion" placeholder="ì§ˆë¬¸ì„ ì…ë ¥í•´ì£¼ì„¸ìš”" maxlength="200">
          <div class="char-count" id="newQuestionCount">0 / 200</div>
        </div>
        <div class="field">
          <label for="newAnswer">ë‹µë³€</label>
          <textarea id="newAnswer" placeholder="ë‹µë³€ì„ ì…ë ¥í•´ì£¼ì„¸ìš” (1000ì)" maxlength="1000"></textarea>
          <div class="char-count" id="newAnswerCount">0 / 1,000</div>
        </div>
        <div class="field">
          <label for="newKeywordsInput">í‚¤ì›Œë“œ</label>
          <div class="tags-wrap" id="newTagsWrap">
            <div class="tags-container" id="newTagsContainer"></div>
            <input type="text" id="newKeywordsInput" class="tags-input" placeholder="í‚¤ì›Œë“œë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.">
          </div>
          <p class="hint">* Enter ë˜ëŠ” ì‰¼í‘œ(,)ë¡œ íƒœê·¸ë¥¼ ì¶”ê°€ í•©ë‹ˆë‹¤.</p>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn" id="cancelNew">ì·¨ì†Œ</button>
        <button type="button" class="btn btn-primary" id="saveNew" disabled>ì €ì¥</button>
      </div>
    </div>
  </div>

  <!-- ë‹µë³€ ìˆ˜ì • ëª¨ë‹¬ -->
  <div class="modal-overlay" id="modalEdit" role="dialog" aria-labelledby="modalEditTitle">
    <div class="modal">
      <div class="modal-header">
        <h2 class="modal-title" id="modalEditTitle">ë‹µë³€ ìˆ˜ì •</h2>
        <button type="button" class="btn-close" id="closeEdit" aria-label="ë‹«ê¸°">&times;</button>
      </div>
      <div class="modal-body">
        <input type="hidden" id="editId">
        <input type="hidden" id="editContext" value="qa">
        <div class="field">
          <label for="editQuestion">ëŒ€í‘œì§ˆë¬¸</label>
          <input type="text" id="editQuestion" placeholder="ì§ˆë¬¸ì„ ì…ë ¥í•´ì£¼ì„¸ìš”" maxlength="200">
          <div class="char-count" id="editQuestionCount">0 / 200</div>
        </div>
        <div class="field">
          <label for="editAnswer">ë‹µë³€</label>
          <textarea id="editAnswer" placeholder="ë‹µë³€ì„ ì…ë ¥í•´ì£¼ì„¸ìš”" maxlength="1000"></textarea>
          <div class="char-count" id="editAnswerCount">0 / 1,000</div>
        </div>
        <div class="field">
          <label for="editKeywordsInput">í‚¤ì›Œë“œ</label>
          <div class="tags-wrap" id="editTagsWrap">
            <div class="tags-container" id="editTagsContainer"></div>
            <input type="text" id="editKeywordsInput" class="tags-input" placeholder="í‚¤ì›Œë“œë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.">
          </div>
          <p class="hint">* Enter ë˜ëŠ” ì‰¼í‘œ(,)ë¡œ íƒœê·¸ë¥¼ ì¶”ê°€ í•©ë‹ˆë‹¤.</p>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn" id="cancelEdit">ì·¨ì†Œ</button>
        <button type="button" class="btn btn-primary" id="saveEdit">ì €ì¥</button>
      </div>
    </div>
  </div>

  <!-- ì·¨ì†Œ í™•ì¸ ëª¨ë‹¬ (ì‹ ê·œ ë“±ë¡/ìˆ˜ì • ëª¨ë‹¬ ë‹«ê¸°) -->
  <div class="modal-overlay confirm-modal" id="modalConfirm" role="dialog">
    <div class="modal">
      <div class="modal-body">
        <p>ì‘ì„± ì¤‘ì¸ ë‚´ìš©ì´ ì €ì¥ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ë‹«ìœ¼ì‹œê² ìŠµë‹ˆê¹Œ?</p>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-cancel" id="confirmCancel">ì·¨ì†Œ</button>
        <button type="button" class="btn btn-ok" id="confirmClose">ë‹«ê¸°</button>
      </div>
    </div>
  </div>

  <!-- ì‚­ì œ í™•ì¸ ëª¨ë‹¬ -->
  <div class="modal-overlay confirm-modal" id="modalDeleteConfirm" role="dialog">
    <div class="modal">
      <div class="modal-body">
        <p>ì‚­ì œ í•˜ì‹œê² ìŠµë‹ˆê¹Œ?</p>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-cancel" id="deleteConfirmCancel">ì·¨ì†Œ</button>
        <button type="button" class="btn btn-ok btn-delete" id="deleteConfirmOk">ì‚­ì œ</button>
      </div>
    </div>
  </div>

  <!-- ëŒ€í‘œ ì§ˆë¬¸ ìì„¸íˆ ë³´ê¸° ëª¨ë‹¬ -->
  <div class="modal-overlay" id="modalDetail" role="dialog" aria-labelledby="modalDetailTitle">
    <div class="modal" style="max-width: 800px;">
      <div class="modal-header">
        <h2 class="modal-title" id="modalDetailTitle">ëŒ€í‘œ ì§ˆë¬¸ ìì„¸íˆ ë³´ê¸°</h2>
        <button type="button" class="btn-close" id="closeDetail" aria-label="ë‹«ê¸°">&times;</button>
      </div>
      <div class="modal-body">
        <p style="font-size: 0.8125rem; color: var(--text-secondary); margin-bottom: 16px;">
          ì‘ì„±í•˜ì‹  ëŒ€í‘œ ì§ˆë¬¸ì— ìœ ì €ë“¤ì´ ì§ˆë¬¸í•œ ë‚´ìš©ë“¤ì„ ì¡°íšŒí•´ì„œ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.<br>
          ì‹¤ì œ ìœ ì €ë“¤ì´ ì§ˆë¬¸í•œ ìœ ì € ì§ˆë¬¸ë“¤ì„ ì¡°íšŒí•´ ë³¼ ìˆ˜ ìˆìœ¼ë©°, ì‘ë‹µ, í‚¤ì›Œë“œ ì¡°íšŒê°€ ê°€ëŠ¥í•©ë‹ˆë‹¤.
        </p>
        <div class="field">
          <label>ëŒ€í‘œì§ˆë¬¸</label>
          <input type="text" id="detailQuestion" readonly style="background: var(--bg-subtle);">
        </div>
        <div style="margin-top: 20px;">
          <div style="background: #111; color: #fff; padding: 12px 16px; border-radius: var(--radius-sm) var(--radius-sm) 0 0; display: flex; justify-content: space-between; font-size: 0.8125rem; font-weight: 600;">
            <span>ìœ ì € ì§ˆë¬¸ ë°ì´í„°</span>
            <span>ë‹µë³€</span>
          </div>
          <div style="border: var(--border); border-top: none; border-radius: 0 0 var(--radius-sm) var(--radius-sm); max-height: 400px; overflow-y: auto;">
            <table style="width: 100%; border-collapse: collapse;">
              <tbody id="detailTableBody">
                <tr style="background: #fff;">
                  <td style="padding: 12px 16px; border-bottom: var(--border); font-size: 0.8125rem;">ì„¸íŠ¸ì½”ì–´ëŠ” ì–´ë–»ê²Œ êµ¬í•´?</td>
                  <td style="padding: 12px 16px; border-bottom: var(--border); font-size: 0.8125rem; color: var(--text-secondary);">ì£„ì†¡í•©ë‹ˆë‹¤ í•´ë‹¹ ì•ˆë‚´ëŠ” ì—†ì–´ìš”</td>
                </tr>
                <tr style="background: var(--bg-subtle);">
                  <td style="padding: 12px 16px; border-bottom: var(--border); font-size: 0.8125rem;">ì„¸íŠ¸ì½”ì–´ëŠ” ì–´ë””?</td>
                  <td style="padding: 12px 16px; border-bottom: var(--border); font-size: 0.8125rem; color: var(--text-secondary);">ì„¸íŠ¸ ì½”ì–´ëŠ” êµ°ë‹¨ ì¹¨ê³µì—ì„œ ì–»ì„ ìˆ˜ ìˆì–´ìš”</td>
                </tr>
                <tr style="background: #fff;">
                  <td style="padding: 12px 16px; border-bottom: var(--border); font-size: 0.8125rem;">ì„¸íŠ¸ ì½”ì–´ ì–»ëŠ” ë°©ë²•</td>
                  <td style="padding: 12px 16px; border-bottom: var(--border); font-size: 0.8125rem; color: var(--text-secondary);">ì£„ì†¡í•©ë‹ˆë‹¤ í•´ë‹¹ ì•ˆë‚´ëŠ” ì—†ì–´ìš”</td>
                </tr>
              </tbody>
            </table>
          </div>
          <div class="pagination" style="margin-top: 16px;">
            <button type="button" data-page="first">Â«</button>
            <button type="button" data-page="prev">â€¹</button>
            <button type="button" class="active" data-page="1">1</button>
            <button type="button" data-page="2">2</button>
            <button type="button" data-page="3">3</button>
            <span>...</span>
            <button type="button" data-page="10">10</button>
            <button type="button" data-page="next">â€º</button>
            <button type="button" data-page="last">Â»</button>
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn" id="cancelDetail">ì·¨ì†Œ</button>
        <button type="button" class="btn btn-primary" id="confirmDetail">í™•ì¸</button>
      </div>
    </div>
  </div>

  <div class="toast" id="toast" aria-live="polite">ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.</div>

  <script>
    (function () {
      const MAX_QUESTION = 200, MAX_ANSWER = 1000, MAX_TAG_LEN = 30, MAX_TAGS = 20;

      // íƒ­ ì „í™˜
      document.querySelectorAll('.tab').forEach(function (tab) {
        tab.addEventListener('click', function () {
          const tabName = this.dataset.tab;
          document.querySelectorAll('.tab').forEach(function (t) { t.classList.remove('active'); });
          document.querySelectorAll('.tab-content').forEach(function (c) { c.classList.remove('active'); });
          this.classList.add('active');
          document.getElementById('tabContent' + (tabName === 'qa' ? 'Qa' : 'Quality')).classList.add('active');
        });
      });

      // ì„ íƒ ê°œìˆ˜ (Q&A ë°ì´í„° ê´€ë¦¬)
      function updateSelectedCount() {
        const n = document.querySelectorAll('#tabContentQa .row-check:checked').length;
        document.getElementById('selectedCount').textContent = 'ì„ íƒëœ ì§ˆë¬¸ ê°œìˆ˜ ' + n;
        document.getElementById('btnDelete').disabled = n === 0;
      }
      const checkAll = document.getElementById('checkAll');
      if (checkAll) {
        checkAll.addEventListener('change', function () {
          document.querySelectorAll('#tabContentQa .row-check').forEach(function (cb) { cb.checked = this.checked; }.bind(this));
          updateSelectedCount();
        });
      }
      const tableBody = document.getElementById('tableBody');
      if (tableBody) {
        tableBody.addEventListener('change', function (e) {
          if (e.target.classList.contains('row-check')) updateSelectedCount();
        });
      }

      // ì„ íƒ ê°œìˆ˜ (ë‹µë³€ í’ˆì§ˆ ê´€ë¦¬)
      function updateQualitySelectedCount() {
        const n = document.querySelectorAll('#tabContentQuality .quality-row-check:checked').length;
        document.getElementById('qualitySelectedCount').textContent = 'ì„ íƒëœ ì§ˆë¬¸ ê°œìˆ˜ ' + n;
        document.getElementById('btnReflect').disabled = n === 0;
        document.getElementById('btnQualityDelete').disabled = n === 0;
      }
      const qualityCheckAll = document.getElementById('qualityCheckAll');
      if (qualityCheckAll) {
        qualityCheckAll.addEventListener('change', function () {
          document.querySelectorAll('#tabContentQuality .quality-row-check').forEach(function (cb) { cb.checked = this.checked; }.bind(this));
          updateQualitySelectedCount();
        });
      }
      const qualityTableBody = document.getElementById('qualityTableBody');
      if (qualityTableBody) {
        qualityTableBody.addEventListener('change', function (e) {
          if (e.target.classList.contains('quality-row-check')) updateQualitySelectedCount();
        });
      }

      // Q&A ë°˜ì˜ ë²„íŠ¼
      const btnReflect = document.getElementById('btnReflect');
      if (btnReflect) {
        btnReflect.addEventListener('click', function () {
          const selected = Array.from(document.querySelectorAll('#tabContentQuality .quality-row-check:checked')).map(function (cb) {
            return cb.closest('tr').dataset.id;
          });
          if (selected.length === 0) return;
          // ì„ íƒëœ í•­ëª©ì„ Q&A ë°ì´í„° í…Œì´ë¸”ë¡œ ì´ë™ (ë°ëª¨)
          selected.forEach(function (id) {
            const row = document.querySelector('#tabContentQuality tr[data-id="' + id + '"]');
            if (row) {
              const cells = row.querySelectorAll('td');
              const question = cells[1].textContent.trim();
              const answer = cells[2].textContent.trim();
              // ì²˜ë¦¬ ìƒíƒœë¥¼ "ë°˜ì˜ ì™„ë£Œ"ë¡œ ë³€ê²½
              if (cells[4]) {
                cells[4].innerHTML = '<span class="status-badge reflected">ë°˜ì˜ ì™„ë£Œ</span>';
              }
            }
          });
          showToast('Q&A ë°˜ì˜ ì™„ë£Œ ë˜ì—ˆìŠµë‹ˆë‹¤.');
          updateQualitySelectedCount();
        });
      }

      // ìƒˆë¡œê³ ì¹¨
      document.getElementById('btnRefresh').addEventListener('click', function () {
        alert('í˜„ì¬ ê²€ìƒ‰ ì¡°ê±´ìœ¼ë¡œ ë°ì´í„°ë¥¼ ë‹¤ì‹œ ì¡°íšŒí•©ë‹ˆë‹¤.');
      });

      // ì‚­ì œ í™•ì¸ ëª¨ë‹¬ (ì‚­ì œ í•˜ì‹œê² ìŠµë‹ˆê¹Œ?)
      var deleteModalContext = 'qa';
      var modalDeleteConfirm = document.getElementById('modalDeleteConfirm');
      document.getElementById('btnDelete').addEventListener('click', function () {
        if (document.querySelectorAll('#tabContentQa .row-check:checked').length === 0) return;
        deleteModalContext = 'qa';
        modalDeleteConfirm.classList.add('open');
      });
      document.getElementById('btnQualityDelete').addEventListener('click', function () {
        if (document.querySelectorAll('#tabContentQuality .quality-row-check:checked').length === 0) return;
        deleteModalContext = 'quality';
        modalDeleteConfirm.classList.add('open');
      });
      document.getElementById('deleteConfirmCancel').addEventListener('click', function () {
        modalDeleteConfirm.classList.remove('open');
      });
      document.getElementById('deleteConfirmOk').addEventListener('click', function () {
        if (deleteModalContext === 'qa') {
          document.querySelectorAll('#tabContentQa .row-check:checked').forEach(function (cb) {
            cb.closest('tr').remove();
          });
          document.getElementById('checkAll').checked = false;
          updateSelectedCount();
        } else {
          document.querySelectorAll('#tabContentQuality .quality-row-check:checked').forEach(function (cb) {
            cb.closest('tr').remove();
          });
          if (document.getElementById('qualityCheckAll')) document.getElementById('qualityCheckAll').checked = false;
          updateQualitySelectedCount();
        }
        modalDeleteConfirm.classList.remove('open');
        showToast('ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.');
      });

      // í† ìŠ¤íŠ¸
      function showToast(msg) {
        const el = document.getElementById('toast');
        el.textContent = msg || '';
        el.classList.add('show');
        setTimeout(function () { el.classList.remove('show'); }, 2500);
      }

      // íƒœê·¸ ìœ í‹¸ (ì‹ ê·œ)
      const newTags = [];
      const newContainer = document.getElementById('newTagsContainer');
      const newInput = document.getElementById('newKeywordsInput');

      function addNewTag(text) {
        const t = text.trim().slice(0, MAX_TAG_LEN);
        if (!t) return;
        if (newTags.length >= MAX_TAGS) return;
        if (newTags.includes(t)) return;
        newTags.push(t);
        const span = document.createElement('span');
        span.className = 'tag';
        span.innerHTML = t + ' <button type="button" class="tag-remove" aria-label="ì œê±°">&times;</button>';
        span.querySelector('.tag-remove').onclick = function () {
          newTags.splice(newTags.indexOf(t), 1);
          span.remove();
        };
        newContainer.appendChild(span);
        newInput.value = '';
      }

      newInput.addEventListener('keydown', function (e) {
        if (e.key === 'Enter') { e.preventDefault(); addNewTag(this.value); }
      });
      newInput.addEventListener('blur', function () { if (this.value.trim()) addNewTag(this.value); });
      newInput.addEventListener('input', function (e) {
        if (e.target.value.includes(',')) {
          e.target.value.split(',').forEach(addNewTag);
          e.target.value = '';
        }
      });

      // ì‹ ê·œ ëª¨ë‹¬
      const modalNew = document.getElementById('modalNew');
      const newQuestion = document.getElementById('newQuestion');
      const newAnswer = document.getElementById('newAnswer');
      const saveNew = document.getElementById('saveNew');

      function isNewDirty() {
        return newQuestion.value.trim() || newAnswer.value.trim() || newTags.length > 0;
      }
      function updateSaveNew() {
        const q = newQuestion.value.trim(), a = newAnswer.value.trim();
        const invalid = /^\s*$/.test(q) || /^\s*$/.test(a);
        saveNew.disabled = invalid;
      }
      newQuestion.addEventListener('input', function () {
        document.getElementById('newQuestionCount').textContent = this.value.length + ' / ' + MAX_QUESTION;
        updateSaveNew();
      });
      newAnswer.addEventListener('input', function () {
        document.getElementById('newAnswerCount').textContent = this.value.length + ' / ' + MAX_ANSWER;
        updateSaveNew();
      });

      function openNewModal() {
        newQuestion.value = '';
        newAnswer.value = '';
        newTags.length = 0;
        newContainer.innerHTML = '';
        newInput.value = '';
        document.getElementById('newQuestionCount').textContent = '0 / ' + MAX_QUESTION;
        document.getElementById('newAnswerCount').textContent = '0 / ' + MAX_ANSWER;
        saveNew.disabled = true;
        modalNew.classList.add('open');
      }
      function closeNewModal(force) {
        if (!force && isNewDirty()) {
          openConfirmModal(function () { modalNew.classList.remove('open'); document.getElementById('modalConfirm').classList.remove('open'); });
          return;
        }
        modalNew.classList.remove('open');
      }
      document.getElementById('btnNew').addEventListener('click', openNewModal);
      document.getElementById('closeNew').addEventListener('click', function () { closeNewModal(false); });
      document.getElementById('cancelNew').addEventListener('click', function () { closeNewModal(false); });
      document.getElementById('saveNew').addEventListener('click', function () {
        var q = newQuestion.value.trim(), a = newAnswer.value.trim();
        if (!q || !a) return;
        // ë¦¬ìŠ¤íŠ¸ ìµœìƒë‹¨ ë°˜ì˜ (ë°ëª¨: ì²« í–‰ ì•ì— ì¶”ê°€)
        var tbody = document.getElementById('tableBody');
        var newId = 'n' + Date.now();
        var tr = document.createElement('tr');
        tr.setAttribute('data-id', newId);
        tr.innerHTML = '<td><input type="checkbox" class="row-check"></td><td class="clickable edit-row">' + q + '</td><td class="answer clickable edit-answer" title="í´ë¦­í•˜ì—¬ ë‹µë³€ ìˆ˜ì •">' + a.slice(0, 60) + (a.length > 60 ? '...' : '') + '</td><td>' + newTags.join(', ') + '</td><td>' + (function () { var d = new Date(); return d.getFullYear().toString().slice(-2) + '.' + String(d.getMonth() + 1).padStart(2, '0') + '.' + String(d.getDate()).padStart(2, '0'); })() + '</td>';
        tbody.insertBefore(tr, tbody.firstChild);
        bindEditRow(tr);
        closeNewModal(true);
        showToast('ì‹ ê·œ ë“±ë¡ ì™„ë£Œ ë˜ì—ˆìŠµë‹ˆë‹¤.');
      });

      // í™•ì¸ ëª¨ë‹¬
      let confirmCallback = null;
      function openConfirmModal(onClose) {
        document.getElementById('modalConfirm').classList.add('open');
        confirmCallback = onClose;
      }
      document.getElementById('confirmCancel').addEventListener('click', function () {
        document.getElementById('modalConfirm').classList.remove('open');
      });
      document.getElementById('confirmClose').addEventListener('click', function () {
        if (confirmCallback) confirmCallback();
        document.getElementById('modalConfirm').classList.remove('open');
      });

      // ìˆ˜ì • ëª¨ë‹¬ (íƒœê·¸)
      const editTags = [];
      const editContainer = document.getElementById('editTagsContainer');
      const editInput = document.getElementById('editKeywordsInput');

      function addEditTag(text) {
        var t = text.trim().slice(0, MAX_TAG_LEN);
        if (!t) return;
        if (editTags.length >= MAX_TAGS) return;
        if (editTags.includes(t)) return;
        editTags.push(t);
        var span = document.createElement('span');
        span.className = 'tag';
        span.innerHTML = t + ' <button type="button" class="tag-remove" aria-label="ì œê±°">&times;</button>';
        span.querySelector('.tag-remove').onclick = function () {
          editTags.splice(editTags.indexOf(t), 1);
          span.remove();
        };
        editContainer.appendChild(span);
        editInput.value = '';
      }
      editInput.addEventListener('keydown', function (e) {
        if (e.key === 'Enter') { e.preventDefault(); addEditTag(this.value); }
      });
      editInput.addEventListener('blur', function () { if (this.value.trim()) addEditTag(this.value); });
      editInput.addEventListener('input', function (e) {
        if (e.target.value.includes(',')) {
          e.target.value.split(',').forEach(addEditTag);
          e.target.value = '';
        }
      });

      const modalEdit = document.getElementById('modalEdit');
      const editQuestion = document.getElementById('editQuestion');
      const editAnswer = document.getElementById('editAnswer');

      editQuestion.addEventListener('input', function () {
        document.getElementById('editQuestionCount').textContent = this.value.length + ' / ' + MAX_QUESTION;
      });
      editAnswer.addEventListener('input', function () {
        document.getElementById('editAnswerCount').textContent = this.value.length + ' / ' + MAX_ANSWER;
      });

      function openEditModal(row) {
        document.getElementById('editContext').value = 'qa';
        var cells = row.querySelectorAll('td');
        var id = row.dataset.id;
        document.getElementById('editId').value = id;
        editQuestion.value = cells[1].textContent.trim();
        editAnswer.value = cells[2].textContent.trim();
        editTags.length = 0;
        editContainer.innerHTML = '';
        editInput.value = '';
        var kw = (cells[3].textContent || '').trim();
        if (kw) kw.split(',').forEach(function (k) { addEditTag(k.trim()); });
        document.getElementById('editQuestionCount').textContent = editQuestion.value.length + ' / ' + MAX_QUESTION;
        document.getElementById('editAnswerCount').textContent = editAnswer.value.length + ' / ' + MAX_ANSWER;
        modalEdit.classList.add('open');
      }

      function openEditModalFromQuality(row) {
        document.getElementById('editContext').value = 'quality';
        var cells = row.querySelectorAll('td');
        var id = row.dataset.id;
        document.getElementById('editId').value = id;
        var ans = cells[2].textContent.trim();
        editQuestion.value = cells[1].textContent.trim();
        editAnswer.value = (ans === '-' ? '' : ans);
        editTags.length = 0;
        editContainer.innerHTML = '';
        editInput.value = '';
        document.getElementById('editQuestionCount').textContent = editQuestion.value.length + ' / ' + MAX_QUESTION;
        document.getElementById('editAnswerCount').textContent = editAnswer.value.length + ' / ' + MAX_ANSWER;
        modalEdit.classList.add('open');
      }
      document.getElementById('closeEdit').addEventListener('click', function () { modalEdit.classList.remove('open'); });
      document.getElementById('cancelEdit').addEventListener('click', function () { modalEdit.classList.remove('open'); });
      document.getElementById('saveEdit').addEventListener('click', function () {
        var ctx = document.getElementById('editContext').value;
        var id = document.getElementById('editId').value;
        if (ctx === 'quality') {
          var row = document.querySelector('#qualityTableBody tr[data-id="' + id + '"]');
          if (row) {
            var c = row.querySelectorAll('td');
            c[1].textContent = editQuestion.value.trim();
            var answerText = editAnswer.value.trim();
            c[2].textContent = answerText || '-';
            c[2].className = 'answer clickable edit-answer';
            if (c[2].title !== 'í´ë¦­í•˜ì—¬ ë‹µë³€ ìˆ˜ì •') c[2].setAttribute('title', 'í´ë¦­í•˜ì—¬ ë‹µë³€ ìˆ˜ì •');
            if (answerText && c[4]) {
              var badge = c[4].querySelector('.status-badge');
              if (!badge || badge.textContent === '-') {
                c[4].innerHTML = '<span class="status-badge answered">ë‹µë³€ ì™„ë£Œ</span>';
              }
            }
          }
        } else {
          var row = document.querySelector('#tableBody tr[data-id="' + id + '"]');
          if (row) {
            var c = row.querySelectorAll('td');
            c[1].textContent = editQuestion.value.trim();
            c[2].textContent = editAnswer.value.trim();
            c[2].className = 'answer clickable edit-answer';
            c[2].setAttribute('title', 'í´ë¦­í•˜ì—¬ ë‹µë³€ ìˆ˜ì •');
            c[3].textContent = editTags.join(', ');
          }
        }
        modalEdit.classList.remove('open');
        showToast('ë‹µë³€ ìˆ˜ì • ì™„ë£Œ ë˜ì—ˆìŠµë‹ˆë‹¤.');
      });

      function bindEditRow(tr) {
        const editCell = tr.querySelector('.edit-row');
        if (editCell) {
          editCell.addEventListener('click', function () { openEditModal(tr); });
        }
        const checkCell = tr.querySelector('.row-check');
        if (checkCell) {
          checkCell.addEventListener('change', updateSelectedCount);
        }
      }
      const editRows = document.querySelectorAll('#tableBody tr .edit-row');
      editRows.forEach(function (cell) {
        cell.addEventListener('click', function () { openEditModal(this.closest('tr')); });
      });

      // Q&A ë°ì´í„° ê´€ë¦¬ í…Œì´ë¸”ì˜ ë‹µë³€ ì…€ í´ë¦­ ì‹œ ë‹µë³€ ìˆ˜ì • ëª¨ë‹¬ ì—´ê¸°
      if (tableBody) {
        tableBody.addEventListener('click', function (e) {
          if (e.target.classList.contains('edit-answer')) {
            e.preventDefault();
            openEditModal(e.target.closest('tr'));
          }
        });
      }

      // ëŒ€í‘œ ì§ˆë¬¸ ìì„¸íˆ ë³´ê¸° ëª¨ë‹¬
      const modalDetail = document.getElementById('modalDetail');
      function openDetailModal(question) {
        document.getElementById('detailQuestion').value = question;
        modalDetail.classList.add('open');
      }
      document.getElementById('closeDetail').addEventListener('click', function () { modalDetail.classList.remove('open'); });
      document.getElementById('cancelDetail').addEventListener('click', function () { modalDetail.classList.remove('open'); });
      document.getElementById('confirmDetail').addEventListener('click', function () { modalDetail.classList.remove('open'); });
      
      // ë‹µë³€ í’ˆì§ˆ ê´€ë¦¬ í…Œì´ë¸”ì˜ ëŒ€í‘œ ì§ˆë¬¸ í´ë¦­ ì‹œ ìƒì„¸ ëª¨ë‹¬ ì—´ê¸°
      const qualityDetailRows = document.querySelectorAll('#qualityTableBody .view-detail');
      qualityDetailRows.forEach(function (cell) {
        cell.addEventListener('click', function () {
          openDetailModal(this.textContent.trim());
        });
      });

      // ë‹µë³€ í’ˆì§ˆ ê´€ë¦¬ í…Œì´ë¸”ì˜ ë‹µë³€ ì…€ í´ë¦­ ì‹œ ë‹µë³€ ìˆ˜ì • ëª¨ë‹¬ ì—´ê¸°
      document.querySelectorAll('#qualityTableBody .edit-answer').forEach(function (cell) {
        cell.addEventListener('click', function (e) {
          e.stopPropagation();
          openEditModalFromQuality(this.closest('tr'));
        });
      });
    })();
  </script>
</body>
</html>
